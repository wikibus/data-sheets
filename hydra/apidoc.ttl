@base              <http://localhost:12345/> .
@prefix hydra:     <http://www.w3.org/ns/hydra/core#> .
@prefix hydra-box: <http://hydra-box.org/schema/> .
@prefix code:      <https://code.described.at/> .
@prefix ds:        <https://facts.wikibus.org/vocab#> .
@prefix api:       <https://facts.wikibus.org/api#> .
@prefix rdfs:      <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema:    <http://schema.org/> .

<api> a                    hydra:ApiDocumentation ;
      hydra:entrypoint     <> ;
      hydra:supportedClass api:Entrypoint,
                           ds:DataSheet,
                           api:DataSheetCollection .

api:Entrypoint a                        hydra:Class ;
               hydra:supportedProperty  [
                                          hydra:property  api:dataSheetCollection ;
                                          hydra:writeable false
                                        ] ;
               hydra:supportedOperation [
                                          a                  hydra-box:View ;
                                          hydra:title        "Datasheet entrypoint" ;
                                          hydra:method       "GET" ;
                                          code:implementedBy [
                                                               a code:EcmaScript ;
                                                               code:link
                                                                 <file:lib/express/handlers/entrypoint#get>
                                                             ]
                                        ] .

api:dataSheetCollection
  a                        hydra:Link ;
  rdfs:range               api:DataSheetCollection ;
  hydra:supportedOperation [
                             a                  hydra-box:View,
                                                schema:CreateAction ;
                             hydra:title        "Create a data sheet" ;
                             hydra:method       "POST" ;
                             hydra:expects      ds:DataSheet ;
                             code:implementedBy [
                                                  a              hydra-box:middlewareChain ;
                                                  code:arguments (
                                                                   [
                                                                     a code:EcmaScript ;
                                                                     code:link
                                                                       <file:lib/express/handlers/data-sheet/create#post>
                                                                   ]
                                                                 )
                                                ]
                           ] .

ds:DataSheet a                        hydra:Class ;
             hydra:supportedProperty  [
                                        hydra:property rdfs:label ;
                                        hydra:required true
                                      ] ;
             hydra:supportedOperation [
                                        a                  hydra-box:View ;
                                        hydra:method       "GET" ;
                                        code:implementedBy [
                                                             a              hydra-box:middlewareChain ;
                                                             code:arguments (
                                                                              [
                                                                                a code:EcmaScript ;
                                                                                code:link
                                                                                  <file:lib/express/handlers/data-sheet/instance#get>
                                                                              ]
                                                                            )
                                                           ]
                                      ],
                                      [
                                        a                  hydra-box:View,
                                                           schema:UpdateAction ;
                                        hydra:method       "PUT" ;
                                        code:implementedBy [
                                                             a              hydra-box:middlewareChain ;
                                                             code:arguments (
                                                                              [
                                                                                a code:EcmaScript ;
                                                                                code:link
                                                                                  <file:lib/express/handlers/data-sheet/instance#put>
                                                                              ]
                                                                              [
                                                                                a code:EcmaScript ;
                                                                                code:link
                                                                                  <file:lib/express/async#preferredTimeout>
                                                                              ]
                                                                              [
                                                                                a code:EcmaScript ;
                                                                                code:link
                                                                                  <file:lib/express/handlers/data-sheet/instance#get>
                                                                              ]
                                                                            )
                                                           ]
                                      ] .

<> a                       api:Entrypoint ;
   api:dataSheetCollection <data-sheets> .

<data-sheet/:id> a ds:DataSheet .
